<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Home - Multi-author Blog</title>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
</head>
<body>

	<div class="container">
		<div class="row">
			
			<h4 id="table-title">Users list</h4>
			<table class="table table-striped users-table">
				<thead>
					<th>#</th>
					<th>Name</th>
					<th>Email</th>
					<th></th>
				</thead>
				<tbody id="users-list">
					
				</tbody>
			</table>


			<table class="table table-striped posts-table" style="display: none;">
				<thead>
					<th>#</th>
					<th>Post</th>
				</thead>
				<tbody id="posts-list">
					
				</tbody>
			</table>


		</div>
	</div>


	<div class="loader">
	</div>

	<style type="text/css">
		.loader{
		position: fixed;
		  left: 0px;
		  top: 0px;
		  width: 100%;
		  height: 100%;
		  z-index: 9999;
		  background: url('loader.gif') 
		              50% 50% no-repeat rgba(249,249,249, .8);
		}
	</style>


	<script type="text/javascript">
		$(document).ready(function(){

			 $.ajax({
			 	url: "https://jsonplaceholder.typicode.com/users", 
			 	success: function(result){
				    console.log(result[0].name);
				    var tr = '<tr>';
				    for(var i = 0; i < result.length; i++){
				    	tr += '<td>' + (i + 1) + '</td>';
				    	tr += '<td>' + result[i].name + '</td>';
				    	tr += '<td>' + result[i].email + '</td>';
				    	tr += '<td><button class="btn btn-primary" onclick="getUserPosts(' + result[i].id + ', \'' + result[i].name + '\')">Get Userâ€™s Posts</button></td>';
				    	tr += '</tr>';
				    }
				    $('#users-list').append(tr);
				    $('.loader').hide();
				  }
			});

		});

		function getUserPosts(user_id, name){
			$('.loader').show();
			 $('.users-table').hide(600);
			 $('.posts-table').show(600);
			 $.ajax({
			 	url: "https://jsonplaceholder.typicode.com/posts?userId=" + user_id, 
			 	success: function(result){
				    console.log(result);
				    $('#table-title').html(name + '\'s posts')
				    var tr = '<tr>';
				    for (var i = 0; i < result.length; i++) {
				    	tr +=  '<td>' + (i + 1) + '</td>';
				    	tr += '<td>' + result[i].title + '<br/>' + result[i].body + '</td>';
				    	tr += '</tr>';
				    }
				    $('#posts-list').html(tr);

				    $('.loader').hide();
				  }
			});
		}
		
	</script>

</body>
</html>